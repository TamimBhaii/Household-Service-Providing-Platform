{% extends 'base.html' %}
{% block title %}Service Detail{% endblock %}
{% block content %}
<div class="container mx-auto py-10">
  <div class="bg-white shadow rounded p-6 flex gap-6">
    {% if service.image %}
      <img src="{{ service.image.url }}" class="w-64 h-64 object-cover rounded">
    {% endif %}
    <div>
      <h1 class="text-3xl font-bold mb-2">{{ service.title }}</h1>
      <p class="mb-2">{{ service.description }}</p>
      <p><strong>Price:</strong> ৳{{ service.price }}</p>
      <p><strong>Duration:</strong> {{ service.duration_minutes }} mins</p>
      <p><strong>Provider:</strong> {{ provider.email }} | {{ provider.phone }}</p>
      <p><strong>Location:</strong> {{ service.district }}, {{ service.upazila }}</p>
      <p><strong>Rating:</strong> {{ rating|default:"No ratings" }}</p>

      {% if user.is_authenticated and user.is_customer %}
        <a href="{% url 'bookings:create_booking' service.pk %}" class="mt-4 px-4 py-2 bg-green-600 text-white rounded">Book Now</a>
      {% else %}
        <a href="{% url 'accounts:login' %}?role=customer" class="mt-4 px-4 py-2 bg-gray-500 text-white rounded">Login as Customer to Book</a>
      {% endif %}
    </div>
  </div>

  <div class="mt-8">
    <h3 class="text-xl font-semibold mb-2">Reviews</h3>
    {% for review in service.reviews.all %}
      <div class="border-b py-2">
        <p><strong>{{ review.customer.email }}</strong> rated {{ review.rating }}★</p>
        <p>{{ review.comment }}</p>
      </div>
    {% empty %}
      <p>No reviews yet.</p>
    {% endfor %}
  </div>
</div>
{% endblock %}
